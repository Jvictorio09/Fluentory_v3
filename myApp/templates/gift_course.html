{% extends 'base.html' %}
{% load static %}

{% block title %}Gift {{ course.name }} - Swedish Wealth Institute{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto">
    <div class="mb-8">
        <a href="{% url 'course_detail' course.slug %}" class="text-teal-soft hover:text-teal-800 text-sm mb-4 inline-block">
            <i class="fas fa-arrow-left mr-2"></i> Back to Course
        </a>
        <h1 class="text-4xl font-bold mb-2 text-gray-800">Gift This Course</h1>
        <p class="text-xl text-gray-700">{{ course.name }}</p>
    </div>

    <div class="bg-[#ffffff]/60 backdrop-blur-sm border border-teal-soft/10 rounded-xl p-8">
        <div class="mb-8 text-center">
            <div class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-teal-soft/20 mb-4">
                <i class="fas fa-gift text-4xl text-teal-soft"></i>
            </div>
            <h2 class="text-2xl font-bold mb-2 text-gray-800">Share the Gift of Learning</h2>
            <p class="text-gray-700">Give someone special access to this amazing course</p>
            <div class="mt-4 text-3xl font-bold text-teal-soft">
                {{ course.price|floatformat:2 }} {{ course.currency }}
            </div>
        </div>

        {% if messages %}
        <div class="mb-6 space-y-2">
            {% for message in messages %}
            <div class="rounded-lg border {% if message.tags == 'error' %}border-red-200 bg-red-50 text-red-700{% elif message.tags == 'success' %}border-green-200 bg-green-50 text-green-700{% else %}border-blue-200 bg-blue-50 text-blue-700{% endif %} px-4 py-3 text-sm">
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}

        <form method="POST" class="space-y-6">
            {% csrf_token %}
            
            <div>
                <label for="recipient_email" class="block text-sm font-semibold text-gray-700 mb-2">
                    Recipient Email Address *
                </label>
                <input
                    type="email"
                    id="recipient_email"
                    name="recipient_email"
                    required
                    placeholder="friend@example.com"
                    class="w-full rounded-lg border border-gray-300 bg-white px-4 py-3 focus:outline-none focus:ring-2 focus:ring-teal-soft focus:border-transparent"
                />
                <p class="text-xs text-gray-600 mt-1">We'll send the gift to this email address</p>
            </div>

            <div>
                <label for="recipient_name" class="block text-sm font-semibold text-gray-700 mb-2">
                    Recipient Name (Optional)
                </label>
                <input
                    type="text"
                    id="recipient_name"
                    name="recipient_name"
                    placeholder="John Doe"
                    class="w-full rounded-lg border border-gray-300 bg-white px-4 py-3 focus:outline-none focus:ring-2 focus:ring-teal-soft focus:border-transparent"
                />
            </div>

            <div>
                <label for="gift_message" class="block text-sm font-semibold text-gray-700 mb-2">
                    Personal Message (Optional)
                </label>
                <textarea
                    id="gift_message"
                    name="gift_message"
                    rows="4"
                    placeholder="Write a personal message to include with the gift..."
                    class="w-full rounded-lg border border-gray-300 bg-white px-4 py-3 focus:outline-none focus:ring-2 focus:ring-teal-soft focus:border-transparent resize-none"
                ></textarea>
            </div>

            <div class="bg-teal-soft/10 border border-teal-soft/30 rounded-lg p-4">
                <h3 class="font-semibold text-gray-800 mb-2">What's Included:</h3>
                <ul class="space-y-2 text-sm text-gray-700">
                    <li class="flex items-start gap-2">
                        <i class="fas fa-check-circle text-teal-soft mt-0.5"></i>
                        <span>Lifetime access to {{ course.name }}</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <i class="fas fa-check-circle text-teal-soft mt-0.5"></i>
                        <span>{{ course.get_lesson_count }} video lessons</span>
                    </li>
                    {% if course.is_accredible_certified %}
                    <li class="flex items-start gap-2">
                        <i class="fas fa-check-circle text-teal-soft mt-0.5"></i>
                        <span>Accredited certificate upon completion</span>
                    </li>
                    {% endif %}
                    <li class="flex items-start gap-2">
                        <i class="fas fa-check-circle text-teal-soft mt-0.5"></i>
                        <span>All course resources and materials</span>
                    </li>
                </ul>
            </div>

            <div class="flex gap-4 pt-4">
                <button
                    type="submit"
                    class="flex-1 px-8 py-4 bg-teal-soft text-white rounded-full font-bold hover:bg-teal-soft/90 transition-all text-lg"
                >
                    <i class="fas fa-gift mr-2"></i> Complete Gift Purchase
                </button>
                <a
                    href="{% url 'course_detail' course.slug %}"
                    class="px-6 py-4 border border-gray-300 rounded-full font-medium hover:bg-gray-50 transition-all text-center"
                >
                    Cancel
                </a>
            </div>

            <p class="text-xs text-center text-gray-600">
                <i class="fas fa-lock mr-1"></i> Secure payment processing
            </p>
        </form>
    </div>
</div>
{% endblock %}

